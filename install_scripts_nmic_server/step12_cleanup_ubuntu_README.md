# step12_cleanup_ubuntu.sh

Ubuntu System Cleanup Utility - Cleans various download caches from package managers and download tools.

## Overview

This script is designed to run after other installation steps to clean up cached files and free disk space. It safely removes temporary files and caches generated by various download tools used during the installation process.

## Usage

```bash
# Make executable (if needed)
chmod +x step12_cleanup_ubuntu.sh

# Run the script
sudo ./step12_cleanup_ubuntu.sh
```

## Cleanup Targets

| Cache Type | Location | Cleanup Action |
|------------|----------|----------------|
| **apt** | `/var/cache/apt` | `apt-get clean`, `autoclean`, `autoremove` |
| **conda** | `/opt/miniconda3/pkgs` | `conda clean --all`, remove tarballs |
| **pip** | `~/.cache/pip` | `pip cache purge`, remove cache directory |
| **npm/npx** | `~/.npm` | `npm cache clean --force`, remove cache directory |
| **Hugging Face** | `~/.cache/huggingface` | Remove entire cache directory |
| **Temp files** | `/tmp` | Remove `.tar.gz`, `.tar.xz`, `.zip`, `.sh` files |
| **Journal logs** | `/var/log/journal` | Keep only last 3 days |

## Cleanup Steps

1. **apt cache** - Cleans Ubuntu package manager cache
2. **conda cache** - Removes Miniconda/Anaconda package cache
3. **pip cache** - Removes Python pip package cache
4. **npm/npx cache** - Removes Node.js package manager cache
5. **Hugging Face cache** - Removes downloaded model cache
6. **Temporary files** - Removes wget/curl downloaded archives

## Disk Usage Report

The script displays disk usage before and after cleanup:

```
Current disk usage for cache directories:
----------------------------------------
  apt cache:           128M
  conda packages:      2.5G
  pip cache:           500M
  npm cache:           200M
  Hugging Face cache:  10G
  /tmp directory:      1.2G
```

## Prerequisites

- Ubuntu 22.04+ or compatible Linux distribution
- sudo privileges
- Tools installed by previous steps (optional):
  - Miniconda3 at `/opt/miniconda3`
  - Node.js at `/opt/node/v22.20.0`

## Safety Notes

- The script uses `|| true` to continue even if a cleanup step fails
- Missing tools are detected and skipped gracefully
- Does not remove installed packages, only caches
- Hugging Face models downloaded to custom locations are preserved

## Related Scripts

- [step00_install_ubuntu.sh](step00_install_ubuntu.sh) - Ubuntu mirror configuration
- [step01_install_python.sh](step01_install_python.sh) - Miniconda installation
- [step02_install_node.sh](step02_install_node.sh) - Node.js installation
- [step06_install_huggingface-models.sh](step06_install_huggingface-models.sh) - Hugging Face model downloads
- [step10_cleanup_docker_images.sh](step10_cleanup_docker_images.sh) - Docker cleanup
